{"version":3,"file":"ViolinView.js","sources":["../src/common/EventEmitter.js","../src/core/component/editor/codearea/CodeArea.js","../src/core/component/editor/viewarea/ViewArea.js","../src/core/component/editor/Editor.js"],"sourcesContent":["\r\nclass EventEmitter{\r\n\r\n    constructor() {\r\n        this.events_handlers = {}\r\n    }\r\n\r\n    on(type,callback){\r\n        if(typeof callback === \"function\"){\r\n            let handlers =  this.events_handlers[type]||(this.events_handlers[type]={})\r\n            handlers[callback.name]=callback;\r\n        }\r\n    }\r\n\r\n    of(type,callback){\r\n        if(typeof callback === \"function\"){\r\n            this.events_handlers[type].remove(callback.name);\r\n        }else {\r\n            type.events_handlers.remove(type);\r\n        }\r\n    }\r\n\r\n    emitter(type,data){\r\n        let handlers = this.events_handlers[type];\r\n        for (let name in  handlers){\r\n            handlers[name].apply(this,{target:this,data:data});\r\n        }\r\n    }\r\n}\r\n\r\nexport default EventEmitter;\r\n","import EventEmitter from \"../../../../common/EventEmitter\";\r\n\r\nclass CodeArea extends EventEmitter {\r\n\r\n    static Class = {\r\n        codeContent: \"code-content\",\r\n        codeToolbar: \"code-toolbar\"\r\n    }\r\n\r\n    static Html = {\r\n        codeContent: `<textarea class=\"${CodeArea.Class.codeContent}\"></textarea>`,\r\n        codeToolbar: `<div class=\"${CodeArea.Class.codeToolbar}\"></div>`\r\n    }\r\n\r\n    static Selector = {\r\n        codeContent: `.${CodeArea.Class.codeContent}`,\r\n        codeToolbar: `.${CodeArea.Class.codeToolbar}`\r\n    }\r\n\r\n    static internalEditor = {\r\n        initialize: codeArea => {\r\n            codeArea.codeContent.addEventListener(\"input\", () => {\r\n                codeArea.emitter(\"codechange\");\r\n            });\r\n            return {\r\n                setValue: value=>{\r\n                    codeArea.codeContent.value = value;\r\n                    codeArea.emitter(\"codechange\");\r\n                },\r\n                getValue: ()=>{\r\n                    return codeArea.codeContent.value;\r\n                },\r\n                setSize:(width,height)=>{\r\n                    if(width)codeArea.contElement.style.width = width;\r\n                    if(height)codeArea.contElement.style.height = height;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    constructor(codeContent, codeToolbar) {\r\n        super();\r\n        this.contElement = codeContent;\r\n        this.toolElement = codeToolbar;\r\n        this.contElement.innerHTML = CodeArea.Html.codeContent;\r\n        this.toolElement.innerHTML = CodeArea.Html.codeToolbar;\r\n        this.codeContent = this.contElement.querySelector(CodeArea.Selector.codeContent);\r\n        this.codeToolbar = this.toolElement.querySelector(CodeArea.Selector.codeToolbar);\r\n    }\r\n\r\n    init(config) {\r\n        let codeConfig = config&&config.editor?config.editor:CodeArea.internalEditor;\r\n        this.editor = codeConfig.initialize(this);\r\n    }\r\n\r\n    userEditor(initialize){\r\n        this.editor = initialize();\r\n    }\r\n\r\n    setSize(width,height){\r\n        if(width)this.contElement.style.width = width;\r\n        if(height)this.contElement.style.height = height;\r\n        this.editor.setSize(width,height);\r\n    }\r\n\r\n    setValue(value) {\r\n        this.editor.setValue(value);\r\n    }\r\n\r\n    getValue() {\r\n        return this.editor.getValue();\r\n    }\r\n}\r\n\r\nexport default CodeArea;\r\n","class ViewArea {\r\n\r\n    static Class = {\r\n        viewContent: \"view-content\",\r\n        viewToolbar: \"view-toolbar\",\r\n        selectViewStyle: \"select-view-style\"\r\n    }\r\n\r\n    static Html = {\r\n        viewContent: `<div class=\"${ViewArea.Class.viewContent}\"></div>`,\r\n        viewToolbar: `<div class=\"${ViewArea.Class.viewToolbar}\">\r\n                        <select class=\"${ViewArea.Class.selectViewStyle}\"></select>\r\n                      </div>`\r\n    }\r\n\r\n    static Selector = {\r\n        viewContent: `.${ViewArea.Class.viewContent}`,\r\n        viewToolbar: `.${ViewArea.Class.viewToolbar}`,\r\n        selectViewStyle: `.${ViewArea.Class.selectViewStyle}`\r\n    }\r\n\r\n    static Style = {\r\n        default: \"view-html-default\",\r\n        github: \"view-html-github\",\r\n        maize: \"view-html-maize\",\r\n        purple: \"view-html-purple\"\r\n    }\r\n\r\n    static internalConverter = v => v;\r\n\r\n    static internalDecorators = {\r\n        toc: (root, codes) => {\r\n            let tocBox = document.createElement(\"div\");\r\n            let tocHead = document.createElement(\"div\");\r\n            tocHead.style.textAlign = \"center\";\r\n            tocHead.style.fontWeight = \"bold\";\r\n            tocHead.innerText = \"目录\";\r\n            tocBox.append(tocHead)\r\n            let tocBody = document.createElement(\"div\");\r\n            tocBox.append(tocBody);\r\n            let hs = root.querySelectorAll(\"h1,h2,h3,h4,h5,h6\");\r\n            hs.forEach(function (h,i){\r\n                let id= `toc-${i}`;\r\n                h.id = id;\r\n                let hLink = document.createElement(\"a\");\r\n                hLink.href = `javascript:document.querySelector('#${id}').scrollIntoView(true);`;\r\n                hLink.innerText = h.innerText;\r\n                let level = Number(h.tagName.charAt(1));\r\n                let hIndent = document.createElement(\"span\");\r\n                while (level-->1){\r\n                    hIndent.innerHTML += \"&emsp;&emsp;\"\r\n                }\r\n                let title = document.createElement(\"div\");\r\n                title.append(hIndent);\r\n                title.append(hLink);\r\n                tocBody.append(title);\r\n            });\r\n\r\n            codes.forEach(function (node,i){\r\n                node.append(tocBox.cloneNode(true));\r\n            })\r\n        }\r\n    };\r\n\r\n    constructor(viewContent, viewToolbar) {\r\n        this.contElement = viewContent;\r\n        this.toolElement = viewToolbar;\r\n        this.contElement.innerHTML = ViewArea.Html.viewContent;\r\n        this.toolElement.innerHTML = ViewArea.Html.viewToolbar;\r\n        this.viewContent = document.querySelector(ViewArea.Selector.viewContent);\r\n        this.viewToolbar = document.querySelector(ViewArea.Selector.viewToolbar);\r\n        this.converter = ViewArea.internalConverter;\r\n        this.decorators = ViewArea.internalDecorators;\r\n    }\r\n\r\n    init(config){\r\n        this.initTools();\r\n        return this;\r\n    }\r\n\r\n    initTools() {\r\n        let selectViewStyle = document.querySelector(ViewArea.Selector.selectViewStyle);\r\n        selectViewStyle.addEventListener(\"change\",e=>{\r\n            this.setStyle(e.target.value);\r\n        });\r\n        let optionsHtml = \"\";\r\n        for (let sty in ViewArea.Style) {\r\n            let option = `<option value=\"${sty}\">${sty}</option>`;\r\n            optionsHtml += option;\r\n        }\r\n        selectViewStyle.innerHTML = optionsHtml;\r\n        this.setStyle(\"purple\");\r\n    }\r\n\r\n    setConverter(converter) {\r\n        this.converter = converter;\r\n    }\r\n\r\n    setDecorator(type, decorator) {\r\n        this.decorators[type+\"\"] = decorator;\r\n    }\r\n\r\n    setStyle(style) {\r\n        for (let sty in ViewArea.Style) {\r\n            this.viewContent.classList.remove(ViewArea.Style[sty]);\r\n        }\r\n        this.viewContent.classList.add(ViewArea.Style[style]);\r\n        let selectViewStyle = document.querySelector(ViewArea.Selector.selectViewStyle);\r\n        selectViewStyle.value = style;\r\n    }\r\n\r\n    setSize(width,height){\r\n        if(width)this.contElement.style.width = width;\r\n        if(height)this.contElement.style.height = height;\r\n        this.viewContent.style.overflow = \"auto\";\r\n    }\r\n\r\n    show(v) {\r\n        this.viewContent.innerHTML = this.converter(v);\r\n        for (let type in this.decorators) {\r\n            let codes = this.viewContent.querySelectorAll(`pre code[class*=\"language-${type}\"]`);\r\n            let decorator = this.decorators[type];\r\n            decorator(this.viewContent, codes);\r\n        }\r\n    }\r\n}\r\n\r\nexport default ViewArea;\r\n","import CodeArea from \"./codearea/CodeArea\";\r\nimport ViewArea from \"./viewarea/ViewArea\";\r\n\r\n\r\nclass Editor {\r\n    static CodeArea = CodeArea;\r\n    static ViewArea = ViewArea;\r\n\r\n\r\n    static Class = {\r\n        codeEditor: \"code-editor\",\r\n\r\n        editorContainer: \"editor-container\",\r\n        codeContainer: \"code-container\",\r\n        viewContainer: \"view-container\",\r\n\r\n        editorToolbarTop: \"editor-toolbar-top\",\r\n        editorToolbarBottom: \"editor-toolbar-bottom\",\r\n        codeToolbar: \"code-toolbar\",\r\n        commonToolbar: \"common-toolbar\",\r\n        viewToolbar: \"view-toolbar\",\r\n\r\n        btnFullscreen: \"btn-fullscreen\",\r\n        btnCodeArea: \"btn-code-area\",\r\n        btnViewArea: \"btn-view-area\",\r\n        btnSplitScreen: \"btn-split-screen\",\r\n\r\n        showCode: \"show-code\",\r\n        showView: \"show-view\",\r\n    }\r\n\r\n    static Selector = {\r\n        editorToolbarTop:`.${Editor.Class.editorToolbarTop}`,\r\n        editorToolbarBottom:`.${Editor.Class.editorToolbarBottom}`,\r\n        editorContainer: `.${Editor.Class.editorContainer}`,\r\n\r\n        codeContainer: `.${Editor.Class.codeContainer}`,\r\n        viewContainer: `.${Editor.Class.viewContainer}`,\r\n\r\n        codeToolbar: `.${Editor.Class.codeToolbar}`,\r\n        viewToolbar: `.${Editor.Class.viewToolbar}`,\r\n\r\n        btnFullscreen: `.${Editor.Class.btnFullscreen}`,\r\n        btnCodeArea: `.${Editor.Class.btnCodeArea}`,\r\n        btnViewArea: `.${Editor.Class.btnViewArea}`,\r\n        btnSplitScreen: `.${Editor.Class.btnSplitScreen}`\r\n    };\r\n\r\n    static Html = {\r\n        editor: `<div class=\"${Editor.Class.codeEditor}\">\r\n                <div class=\"${Editor.Class.editorToolbarTop}\">\r\n                    <div class=\"${Editor.Class.codeToolbar}\">\r\n                        <button class=\"editor-btn-fullscreen\">test</button>\r\n                    </div>\r\n                    <div class=\"${Editor.Class.commonToolbar}\">\r\n                        <button class=\"${Editor.Class.btnFullscreen}\">fullscreen</button>\r\n                        <button class=\"${Editor.Class.btnCodeArea}\">codeArea</button>\r\n                        <button class=\"${Editor.Class.btnViewArea}\">viewArea</button>\r\n                        <button class=\"${Editor.Class.btnSplitScreen}\">split screen</button>\r\n                    </div>\r\n                    <div class=\"${Editor.Class.viewToolbar}\">\r\n                        <button class=\"editor-btn-fullscreen\">test</button>\r\n                    </div>\r\n                </div>\r\n                <div class=\"${Editor.Class.editorContainer}\">\r\n<!--                    <div class=\"toolbar-left\"></div>-->\r\n                    <div class=\"${Editor.Class.codeContainer}\"></div>\r\n                    <div class=\"toolbar-center\"></div>\r\n                    <div class=\"${Editor.Class.viewContainer}\"></div>\r\n<!--                    <div class=\"toolbar-right\"></div>-->\r\n                </div>\r\n                <div class=\"${Editor.Class.editorToolbarBottom}\">\r\n                \r\n                </div>\r\n            </div>`\r\n    };\r\n\r\n    constructor(ele) {\r\n        this.element = ele;\r\n        this.element.innerHTML = Editor.Html.editor;\r\n        let codeContainer = this.element.querySelector(Editor.Selector.codeContainer);\r\n        let viewContainer = this.element.querySelector(Editor.Selector.viewContainer);\r\n        let codeToolbar = this.element.querySelector(Editor.Selector.codeToolbar);\r\n        let viewToolbar = this.element.querySelector(Editor.Selector.viewToolbar);\r\n        this.codeArea = new CodeArea(codeContainer, codeToolbar);\r\n        this.viewArea = new ViewArea(viewContainer, viewToolbar);\r\n    }\r\n\r\n    init(config) {\r\n        let codeArea = this.codeArea;\r\n        let viewArea = this.viewArea;\r\n        codeArea.on(\"codechange\", function () {\r\n            viewArea.show(codeArea.getValue());\r\n        });\r\n        this.initToolbar();\r\n        let codeConfig = null;\r\n        let viewConfig = null;\r\n        let width = \"auto\";\r\n        let height = \"auto\";\r\n        if(config){\r\n            if(config.codeConfig) codeConfig = config.codeConfig;\r\n            if(config.viewConfig) viewConfig = config.viewConfig;\r\n            if(config.width) width = typeof Number(config.width)===\"number\"?(config.width+\"px\"):config.width;\r\n            if(config.height) height = typeof Number(config.height)===\"number\"?(config.height+\"px\"):config.height;\r\n        }\r\n        this.codeArea.init(codeConfig);\r\n        this.viewArea.init(viewConfig);\r\n        return this;\r\n    }\r\n\r\n    setSize(width,height){\r\n        this.height = height;\r\n        this.width = width;\r\n        this.resize(width,height);\r\n    }\r\n\r\n    resize(width,height){\r\n        // if(width)this.element.style.width = typeof Number(width)===\"number\"?width+\"px\":width;\r\n        if(height)this.element.style.height = typeof Number(height)===\"number\"?height+\"px\":height;\r\n        let containerHeight = this.element.style.height.replace(\"px\",\"\")-document.querySelector(Editor.Selector.editorToolbarTop).scrollHeight+\"px\";\r\n        this.codeArea.setSize(null,containerHeight);\r\n        this.viewArea.setSize(null,containerHeight);\r\n    }\r\n\r\n    initToolbar() {\r\n        let btnFullscreen = this.element.querySelector(Editor.Selector.btnFullscreen);\r\n        btnFullscreen.addEventListener(\"click\", () => {\r\n            if (!document.fullscreenElement) {\r\n                this.element.requestFullscreen();\r\n                this.resize(window.screen.width,window.screen.height);\r\n            } else {\r\n                document.exitFullscreen();\r\n                this.resize(this.width,this.height);\r\n            }\r\n        });\r\n        let editorContainer = this.element.querySelector(Editor.Selector.editorContainer);\r\n        let btnCodeArea = this.element.querySelector(Editor.Selector.btnCodeArea);\r\n        btnCodeArea.addEventListener(\"click\", () => {\r\n            editorContainer.classList.remove(\"show-view\")\r\n            editorContainer.classList.add(\"show-code\");\r\n        })\r\n        let btnViewArea = this.element.querySelector(Editor.Selector.btnViewArea);\r\n        btnViewArea.addEventListener(\"click\", () => {\r\n            editorContainer.classList.remove(\"show-code\")\r\n            editorContainer.classList.add(\"show-view\");\r\n        })\r\n        let btnSplitScreen = this.element.querySelector(Editor.Selector.btnSplitScreen);\r\n        btnSplitScreen.addEventListener(\"click\", () => {\r\n            editorContainer.classList.remove(\"show-code\", \"show-view\");\r\n        })\r\n    }\r\n}\r\n\r\nexport default Editor;\r\n"],"names":["EventEmitter","events_handlers","on","type","callback","handlers","name","of","remove","emitter","data","apply","target","CodeArea","codeContent","codeToolbar","contElement","toolElement","innerHTML","Html","querySelector","Selector","init","config","codeConfig","editor","internalEditor","initialize","userEditor","setSize","width","height","style","setValue","value","getValue","Class","codeArea","addEventListener","ViewArea","viewContent","viewToolbar","document","converter","internalConverter","decorators","internalDecorators","initTools","selectViewStyle","e","setStyle","optionsHtml","sty","Style","option","setConverter","setDecorator","decorator","classList","add","overflow","show","v","codes","querySelectorAll","default","github","maize","purple","toc","root","tocBox","createElement","tocHead","textAlign","fontWeight","innerText","append","tocBody","hs","forEach","h","i","id","hLink","href","level","Number","tagName","charAt","hIndent","title","node","cloneNode","Editor","ele","element","codeContainer","viewContainer","viewArea","initToolbar","viewConfig","resize","containerHeight","replace","editorToolbarTop","scrollHeight","btnFullscreen","fullscreenElement","requestFullscreen","window","screen","exitFullscreen","editorContainer","btnCodeArea","btnViewArea","btnSplitScreen","codeEditor","editorToolbarBottom","commonToolbar","showCode","showView"],"mappings":"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"}